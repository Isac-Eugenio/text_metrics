
class TextVowelConsonantMetrics {
  final TextMetricsBase base;
  TextVowelConsonantMetrics(this.base);

  /// Conjunto de vogais (maiúsculas, minúsculas e acentuadas)
  static const _vowels =
      'aeiouAEIOUáàâãéèêíìîóòôõúùûÁÀÂÃÉÈÊÍÌÎÓÒÔÕÚÙÛ';

  /// Conta o número de vogais no texto
  int get vowelCount => RegExp('[$_vowels]').allMatches(base.data).length;

  /// Conta o número de consoantes no texto
  int get consonantCount => RegExp(
    r'[bcdfghjklmnpqrstvwxyzBCDFGHJKLMNPQRSTVWXYZ]',
  ).allMatches(base.data).length;
}

class TextNormalizationMetrics {
  final TextMetricsBase base;
  TextNormalizationMetrics(this.base);

  /// Normaliza todos os espaços, removendo múltiplos espaços e trims
  String get normalizedWhitespace =>
      base.data.replaceAll(RegExp(r'\s+'), ' ').trim();

  /// Remove pontuação
  String get withoutPunctuation =>
      base.data.replaceAll(RegExp(r'[^\w\s]'), '');

  /// Retorna apenas letras, removendo dígitos, símbolos e espaços
  String get onlyLetters =>
      base.data.replaceAll(RegExp(r'[^A-Za-zÀ-ÿ]'), '');

  /// Normaliza acentos para ASCII (minúsculas e cedilha)
  String get normalizedAscii => base.data
      .toLowerCase()
      .replaceAll(RegExp(r'[áàâã]'), 'a')
      .replaceAll(RegExp(r'[éèê]'), 'e')
      .replaceAll(RegExp(r'[íìî]'), 'i')
      .replaceAll(RegExp(r'[óòôõ]'), 'o')
      .replaceAll(RegExp(r'[úùû]'), 'u')
      .replaceAll(RegExp(r'ç'), 'c');
}